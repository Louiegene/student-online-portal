<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        <title>New Password - Limay Senior High School</title>
        <link rel="icon" href="/favicon.ico" sizes="16x16" type="image/x-icon">
        <link rel="apple-touch-icon" sizes="180x180" href="/public/assets/images/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/public/assets/images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/public/assets/images/favicon-16x16.png">
        <meta name="description" content="Welcome to Limay Senior High School, leading students to holistic success.">
        <meta name="keywords" content="Limay, Senior High School, Education, Enrollment, Programs">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <script src="https://kit.fontawesome.com/YOUR-KIT-ID.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
        <link rel="stylesheet" href="../../public/assets/css/styles.css">
        <link rel="stylesheet" href="../../public/assets/css/studentportalstyle.css">
    </head>
<body>
    
    <header class="container-fluid d-flex justify-content-between align-items-center px-3">
        <div class="d-flex align-items-center">
            <img alt="School logo" class="rounded-circle" height="65" src="../../public/images/limayshslogo.png" width="65"/>
            <div class="ms-3">
                <h1 class="h5 text-white fw-bold m-0">LIMAY SENIOR HIGH SCHOOL</h1> 
                <p class="small text-white m-0">LEADING STUDENTS TO HOLISTIC SUCCESS</p>
            </div>
        </div>
    
        <nav class="navbar navbar-expand-lg navbar-light">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span> Menu
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../../index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Enrollment</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../src/views/programs.html">Programs</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../src/views/announcement.html">Announcements</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../src/views/about_us.html">About Us</a></li>
                    <li class="nav-item"><a class="nav-link" href="../../src/views/contact_us.html">Contact Us</a></li>
                    <li class="nav-item">
                        <a class="nav-link portal-button px-4 py-2 rounded-pill" href="../..src/views/student_portal.html">Student Portal</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <div class="login-container">
            <div class="login-form">
                <h2>Set New Password</h2>
                <form id="newPasswordForm">
                    <div class="input-group">
                        <input type="password" id="newPassword" placeholder="New Password" required>
                        <button type="button" id="toggleNewPassword" class="toggle-password" aria-label="Toggle password visibility">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        </button>
                    </div>
                    <div class="input-group">
                        <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
                        <button type="button" id="toggleConfirmPassword" class="toggle-password" aria-label="Toggle password visibility">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        </button>
                    </div>
                    <button type="submit" class="login-button">Set Password</button>
                </form>
                <div class="back-to-login">
                    <span>Remember your password?</span>
                    <a href="student_portal.html">Login</a>
                </div>
            </div>
            <div class="login-image">
                <img src="../../public/assets/images/about-us1.jpg" alt="Limay SHS">
            </div>
        </div>
    </main>
    

    <footer class="d-flex flex-column flex-md-row justify-content-between align-items-center p-4">
        <div class="d-flex align-items-center text-start">
            <div class="footer-logo-container">
                <img src="../../public/assets/images/limayshslogo.png" alt="School Logo" width="65">
            </div>                
            <div class="ms-3">
                <h1 class="h5 text-white fw-bold m-0 text-start">LIMAY SENIOR HIGH SCHOOL</h1>
                <p class="small text-white m-0 text-start">Â© 2025 Limay Senior High School. All Rights Reserved.</p>
            </div>
        </div>
        
        <div class="d-flex mt-3 mt-md-0 ms-md-auto footer">
            <a href="/src/views/privacypolicy.html" class="text-white mx-2">Privacy Policy</a>
            <a href="#" class="text-white mx-2">Citizen's Charter</a>
            <a class="text-white mx-2" href="https://www.facebook.com/LimaySeniorHighSchool" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-facebook"></i>
            </a>
        </div>
    </footer>


    <script src="../../public/assets/js/togglePassword.js"></script>
    <script>
        // Toggle password visibility for new password
        document.getElementById("toggleNewPassword").addEventListener("click", function() {
            const newPasswordInput = document.getElementById("newPassword");
            const type = newPasswordInput.getAttribute("type") === "password" ? "text" : "password";
            newPasswordInput.setAttribute("type", type);
        });
    
        // Toggle password visibility for confirm password
        document.getElementById("toggleConfirmPassword").addEventListener("click", function() {
            const confirmPasswordInput = document.getElementById("confirmPassword");
            const type = confirmPasswordInput.getAttribute("type") === "password" ? "text" : "password";
            confirmPasswordInput.setAttribute("type", type);
        });
    
        // Handle form submission
        document.getElementById("newPasswordForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent the default form submission
    
            const newPassword = document.getElementById("newPassword").value;
        const confirmPassword = document.getElementById("confirmPassword").value;

        // Basic validation to check if passwords match
        if (newPassword !== confirmPassword) {
            alert("Passwords do not match. Please try again.");
            return;
        }

        // Prepare data to send to the server
        const formData = new FormData();
        formData.append("newPassword", newPassword);
        // You may also want to include a token or user identifier if needed
        // formData.append("token", yourToken);

        // Send the new password to the server
        fetch("/src/controllers/set_new_password.php", {
            method: "POST",
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === "success") {
                alert(data.message); // Show success message
                // Optionally redirect to login page or another page
                window.location.href = "/public/assets/views/student_portal.html"; // Redirect to login page
            } else {
                alert(data.message); // Show error message
            }
        })
        .catch(error => {
            console.error("Error:", error);
            alert("An error occurred. Please try again later.");
        });
    });</script>
</body>
</html>
